import{d,r as f,w as c,k as m,F as V,l as I,n as Q,m as i,p as A,q as g,u as L}from"./index.9d5eaa0e.js";import{Q as $}from"./QInput.c96b4e3b.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.40f37218.js";import"./QSpinner.d48ca543.js";const D=d({__name:"QOtpInput",props:{length:{default:6},modelValue:{default:""},digitOnly:{type:Boolean,default:!0},allowPaste:{type:Boolean,default:!0},realTime:{type:Boolean,default:!1},outlined:{type:Boolean},filled:{type:Boolean},dense:{type:Boolean},standout:{type:[Boolean,String]},colGutter:{default:"sm"}},emits:["update:model-value"],setup(r,{emit:v}){d({name:"QOtpInput"});const t=r,y=v,l=f(Array.from(t.modelValue.substring(0,t.length)));c(()=>t.modelValue,()=>{t.realTime&&(l.value=Array.from(t.modelValue.substring(0,t.length)))});const u=f([]),n=e=>{e>=0&&e<t.length?u.value[e].focus():e===t.length?u.value[t.length-1].blur():u.value[0].focus()},h=e=>/^\d$/.test(e),_=e=>/^[A-Za-z0-9]$/.test(e),O=e=>/^\d+$/.test(e),w=e=>/^[A-Za-z0-9]+$/.test(e),k=async(e,a)=>{const{key:o}=e,s=l.value.length;(t.digitOnly?h:_)(o)&&(a>=s?(s<=t.length&&l.value.push(o),n(l.value.length)):(l.value[a]=o,n(a+1))),e.key==="Backspace"&&(a===s?(l.value.pop(),n(l.value.length)):(l.value.splice(a,1),n(a-1))),e.key==="ArrowLeft"&&n(a-1),e.key==="ArrowRight"&&n(a+1),e.ctrlKey&&(o==="v"||o==="V")&&p()};c(()=>l.value.join(""),()=>B());const B=()=>{const e=l.value.join("");(t.realTime||l.value.length===t.length)&&y("update:model-value",e)},p=async()=>{if(t.allowPaste){const e=await navigator.clipboard.readText();(t.digitOnly?O:w)(e)&&(l.value=e.split("").slice(0,t.length),n(l.value.length))}};return(e,a)=>(i(),m("div",{class:Q(["row",`q-col-gutter-${e.colGutter}`])},[(i(!0),m(V,null,I(e.length,o=>(i(),A(L($),{outlined:e.outlined,filled:e.filled,dense:e.dense,standout:e.standout,key:o,ref_for:!0,ref_key:"inputRefs",ref:u,class:"col otp-input-item",autofocus:o===1,type:"text",maxlength:1,onKeydown:g(s=>k(s,o-1),["prevent"]),onPaste:g(p,["prevent"]),"model-value":l.value[o-1]},null,8,["outlined","filled","dense","standout","autofocus","onKeydown","model-value"]))),128))],2))}});var K=b(D,[["__scopeId","data-v-da04e6e4"]]),q=({app:r})=>{r.component("QOtpInput",K)};export{q as default};
