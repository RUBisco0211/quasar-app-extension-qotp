import{d as Q,R as U,a5 as z,r as B,w as k,S as K,U as u,W as P,a6 as d,Z as i,a2 as f,F as V,a7 as R,f as T,a8 as q,a9 as Z,aa as j,a1 as E}from"./index-BWlB4tEN.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={key:0},W={key:1},G=Q({__name:"QOtpInput",props:{length:{default:6},placeholder:{default:""},modelValue:{default:""},autofocus:{type:Boolean,default:!0},digitOnly:{type:Boolean,default:!0},allowPaste:{type:Boolean,default:!0},realTime:{type:Boolean,default:!0},type:{default:"text"},readonly:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},outlined:{type:Boolean,default:!0},filled:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},standout:{type:[Boolean,String],default:!1},fontSize:{default:"18px"},"onUpdate:model-value":{}},emits:["update:model-value"],setup(p,{expose:b,emit:w}){U(e=>({"65fcf652":t.fontSize}));const t=p,$=w,c=()=>{s.value.forEach(e=>e.blur())},g=()=>{t.length>=1&&s.value[0].focus()},v=()=>{a.value.splice(0,a.value.length)},y=()=>{a.value.pop()};z();const a=B(Array.from(t.modelValue.substring(0,t.length)));k(()=>t.modelValue,()=>{t.realTime&&(a.value=Array.from(t.modelValue.substring(0,t.length)))});const s=B([]),O=e=>{s.value[e].select()},n=e=>{e>=0&&e<t.length?s.value[e].focus():e===t.length?s.value[t.length-1].blur():s.value[0].focus()},S=e=>/^\d$/.test(e),D=e=>/^[A-Za-z0-9]$/.test(e),A=e=>/^\d+$/.test(e),C=e=>/^[A-Za-z0-9]+$/.test(e),I=(e,o)=>{const l=e?.toString();if(!l){a.value.splice(o,1),n(o-1);return}if((t.digitOnly?S:D)(l)){const m=a.value.length;o>=m?(m<=t.length&&a.value.push(l),n(a.value.length)):(a.value[o]=l,n(o+1))}},F=async(e,o)=>{const{key:l}=e;if(e.key==="Backspace"){a.value.pop(),n(a.value.length);return}if(e.key==="ArrowLeft"){e.preventDefault(),n(o-1);return}if(e.key==="ArrowRight"){e.preventDefault(),n(o+1);return}if(e.ctrlKey&&(l==="v"||l==="V")){e.preventDefault(),await h();return}};k(()=>a.value.join(""),()=>L());const L=()=>{const e=a.value.join("");(t.realTime||a.value.length===t.length)&&$("update:model-value",e)},h=async()=>{if(t.allowPaste){const e=await navigator.clipboard.readText();(t.digitOnly?A:C)(e)&&(a.value=e.split("").slice(0,t.length),n(a.value.length))}};return b({blur:c,focus:g,clear:v,backspace:y}),(e,o)=>(u(),K(E,{class:"row q-my-none q-pa-none items-center q-col-gutter-sm"},{default:P(()=>[e.$slots.before?(u(),d("div",M,[f(e.$slots,"before",{blur:c,focus:g,clear:v,backspace:y},void 0,!0)])):i("",!0),(u(!0),d(V,null,R(e.length,l=>(u(),d(V,{key:l},[T(q(Z),{placeholder:e.placeholder,type:e.type,error:e.error,outlined:e.outlined,filled:e.filled,standout:e.standout,dense:e.dense,class:"col otp-input-item",ref_for:!0,ref_key:"inputRefs",ref:s,loading:!1,disable:e.disable||e.loading,readonly:e.readonly||e.loading,"no-error-icon":"","hide-bottom-space":"","model-value":a.value[l-1],autofocus:e.autofocus&&l===1,maxlength:1,"onUpdate:modelValue":r=>I(r,l-1),onKeydown:r=>F(r,l-1),onFocus:r=>O(l-1),onPaste:j(h,["prevent"])},null,8,["placeholder","type","error","outlined","filled","standout","dense","disable","readonly","model-value","autofocus","onUpdate:modelValue","onKeydown","onFocus"]),l!==e.length?f(e.$slots,"separator",{key:0,slotClass:e.error?"text-negative":""},void 0,!0):i("",!0)],64))),128)),e.$slots.after?(u(),d("div",W,[f(e.$slots,"after",{blur:c,focus:g,clear:v,backspace:y},void 0,!0)])):i("",!0),e.$slots.loading?f(e.$slots,"loading",{key:2,loading:e.loading},void 0,!0):i("",!0)]),_:3}))}}),H=N(G,[["__scopeId","data-v-464ccd56"]]),Y=({app:p})=>{p.component("QOtpInput",H)};export{Y as default};
